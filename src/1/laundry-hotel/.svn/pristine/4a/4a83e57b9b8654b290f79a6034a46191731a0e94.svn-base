@{
    ViewBag.Title = "入厂";
}

<div class="child">
    <div class="table-responsive dataTables_wrapper" id="dataReport">
    </div>
</div>

<script>
    $(document).ready(function () {
        getdata();

        //setInterval(function () {
        //    getdata();
        //}, 1000 * 3);
    });

    function getdata() {
        var _url = "@Url.Action("GetInfactory", "Factory")";

        $.ajax({
            type: "post",
            data: {},
            url: _url + "?t=" + new Date().getTime(),
            cache: false,
            beforeSend: function () {
                $("#dataReport").children().remove();
                var div = $("<div></div>").addClass("list-group").css({ "margin-top": "20%", "width": "70%", "text-align": "center" });
                var label = $("<label style='font-size:48px;'>加载中...</label>");
                div.append(label);
                $("#dataReport").append(div);
            },
            success: function (result) {
                var it, table, thread, tr;

                table = $("<table></table>").addClass("table").addClass("table-bordered").addClass("table-hover");
                tr = $("<tr></tr>");
                $("<th style='text-align:left;'>类型</th>").appendTo(tr);
                $("<th style='text-align:right;'>待洗数量</th>").appendTo(tr);
                $("<th style='text-align:right;'>洗涤中</th>").appendTo(tr);
                $("<th style='text-align:right;'>已洗涤</th>").appendTo(tr);
                //$("<th style='text-align:left;'>物流人员</th>").appendTo(tr);
                $(table).append(tr);

                for (var j = 0; j < result.length; j++) {
                    it = result[j];
                    tr = $("<tr></tr>");
                    $("<td style='text-align:left;padding-right:5px;'>" + it.ClassName + "</td>").appendTo(tr);
                    $("<td style='text-align:right;padding-right:5px;'>" + it.Quantity + "</td>").appendTo(tr);
                    $("<td style='text-align:right;padding-left:0px;padding-right:5px;'>" + it.Washing + "</td>").appendTo(tr);
                    $("<td style='text-align:right;padding-right:5px;'>" + it.Washed + "</td>").appendTo(tr);
                    //$("<td style='text-align:left;padding-left:5px'>" + it.Handler + "</td>").appendTo(tr);
                    $(table).append(tr);
                }

                $("#dataReport").children().remove();
                $("#dataReport").append(table);
            }
        });
    }

</script>